---
title: Unityで3Dキャラクターを制御した
date: 2025-12-03
draft: true
tags: [unity, game-dev]
---

[農工大アドベントカレンダー2025](https://qiita.com/advent-calendar/2025/tuat) の記事でもあるので、まともな文体で書いております。

## はじめに

大学の学祭でゲームを制作しました → 詳しくはこちら[TODO: ここに何かリンクを貼る]

市販のゲームがどうなってるかは全く知りませんので、適当に読んでいただければ幸いです。

## 仕様の整理

仕様書のプレイヤーの操作は以下のとおりです。若干複雑なことが伝われば読みとばしてOKです。

<details>
<summary>長いので折りたたみ</summary>

- 移動: スティック操作でフィールド内で自由に移動できる。スティックの倒し具合で移動速度は調整可能。ダッシュだと更に早く移動できる。
- 射撃: JoyConを構えてZRでチャージ、振りながら離して発射。チャージ中も移動は可能だが、ダッシュは出来ず移動速度も遅くなる。
- パリィ: 相手の射撃が当たりそうなときにタイミングよくRを押しながら振ることで射撃を受け流すことができる。めっちゃタイミングがいい場合は相手の射撃を反射して相手に飛ばすことも可能。
- パリィ: 相手の射撃が当たりそうなときにタイミングよくRを押しながら振ることで射撃を受け流すことができる。めっちゃタイミングがいい場合は相手の射撃を反射して相手に飛ばすことも可能。
- ガード: Rを押し続けている間、相手の攻撃を防げる。ただしスタミナを継続的に消費するのでずっとは不可。そのままJoyConを振るとパリィになり、攻撃の反射が可能。

</details>

これをもとに、モーションとキャラクターの移動の実装の視点で必要な情報を洗い出します。

<details>

<summary>長いので折りたたみ</summary>

- チャージ中のプレイヤーの移動 → 相手方向を向いてカニさん歩き
- ガード中のプレイヤーの移動 → 相手方向を向いてカニさん歩き
- パリィモーション中のプレイヤーの移動 → 移動せず、向きは直前のまま(ガード後なので必ず相手方向)
- 被弾モーション中の移動 → 移動しない、向きは直前のまま
- 攻撃モーション中の移動 → 通常通り移動

モーション制作とキャラ制御の担当が別々の人なら話のすり合わせは必須ですね。

</details>

さらに、入力や被弾時のイベントについても考慮します。

<details>
<summary>長いので折りたたみ</summary>

- チャージ中のガード入力やガード中のチャージ入力 → 無効。入力は排他で、早いほうが優先
- パリィ中に魔法が当たった時 → 先行のパリィモーションを継続し、特に何も起きない。
- 被弾モーション中に魔法が当たった時 → 先行の被弾モーションを継続し、内部的には被弾
- パリィ早すぎ → 被弾
- パリィ遅すぎ → ただのガード

</details>

## どうやって実装しよう

<details>
<summary>前提知識: Animator Controller の使い方</summary>

</details>
