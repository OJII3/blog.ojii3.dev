---
---

<script>
  const initDarkTheme = () => {
    const theme = (() => {
      const localStorageTheme = localStorage?.getItem("theme") ?? '';
      if (['dark', 'light'].includes(localStorageTheme)) {
        return localStorageTheme;
      }
      return 'light';
    })();

    if (theme === 'light') {
      document.documentElement.classList.remove('dark');
    } else {
      document.documentElement.classList.add('dark');
    }

    window.localStorage.setItem('theme', theme);
  }

  initDarkTheme();

  // Client Router でページ遷移した際にもテーマを再適用
  document.addEventListener('astro:after-swap', initDarkTheme);
</script>
